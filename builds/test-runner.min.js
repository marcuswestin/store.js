/* store.js - Copyright (c) 2010-2017 Marcus Westin */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.store=t()}}(function(){var define,module,exports;return function t(e,n,r){function o(i,a){if(!n[i]){if(!e[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(s)return s(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[i]={exports:{}};e[i][0].call(f.exports,function(t){var n=e[i][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){m&&v&&(m=!1,v.length?h=v.concat(h):g=-1,h.length&&u())}function u(){if(!m){var t=s(a);m=!0;for(var e=h.length;e;){for(v=h,h=[];++g<e;)v&&v[g].run();g=-1,e=h.length}v=null,m=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function f(){}var l,p,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var v,h=[],m=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new c(t,e)),1!==h.length||m||s(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=f,d.addListener=f,d.once=f,d.off=f,d.removeListener=f,d.removeAllListeners=f,d.emit=f,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";e.exports={defaults:t("./defaults"),dump:t("./dump"),events:t("./events"),observe:t("./observe"),expire:t("./expire"),json2:t("./json2"),operations:t("./operations"),update:t("./update"),"v1-backcompat":t("./v1-backcompat")}},{"./defaults":4,"./dump":6,"./events":8,"./expire":10,"./json2":12,"./observe":15,"./operations":17,"./update":19,"./v1-backcompat":21}],3:[function(t,e,n){"use strict";e.exports={defaults:t("./defaults_test"),dump:t("./dump_test"),events:t("./events_test"),observe:t("./observe_test"),expire:t("./expire_test"),json2:t("./json2_test"),operations:t("./operations_test"),update:t("./update_test"),"v1-backcompat":t("./v1-backcompat_test")}},{"./defaults_test":5,"./dump_test":7,"./events_test":9,"./expire_test":11,"./json2_test":13,"./observe_test":16,"./operations_test":18,"./update_test":20,"./v1-backcompat_test":22}],4:[function(t,e,n){"use strict";function r(){function t(t,e){n=e}function e(t,e){var r=t();return void 0!==r?r:n[e]}var n={};return{defaults:t,get:e}}e.exports={name:"defaults",mixin:r}},{}],5:[function(t,e,n){"use strict";function r(t){test("defaults",function(){t.defaults({foo:"bar"}),assert("bar"==t.get("foo")),t.set("foo","bar2"),assert("bar2"==t.get("foo")),t.remove("foo"),assert("bar"==t.get("foo"))}),test("defaults + namespace",function(){t.defaults({foo:"bar"});var e=t.namespace("store2");t.namespace("store3");assert("bar"==e.get("foo")),e.defaults({foo:"bar2"}),assert("bar2"==e.get("foo"))})}t("./defaults"),e.exports={setup:r}},{"./defaults":4}],6:[function(t,e,n){"use strict";function r(){function t(t){var e={};return this.each(function(t,n){e[n]=t}),e}return{dump:t}}e.exports={name:"dump",mixin:r}},{}],7:[function(t,e,n){"use strict";function r(t){test("dump",function(){var e={foo:"bar",cat:{mat:!0},hat:"bat"};s(e,function(e,n){t.set(n,e)}),assert(a(t.dump(),e),"not equal"),t.clearAll(),assert(a(t.dump(),{}),"not empty")})}var o=t("../util"),s=o.each,i=t("../../tests/util"),a=i.deepEqual;e.exports={setup:r}},{"../../tests/util":34,"../util":32}],8:[function(t,e,n){"use strict";function r(){function t(t,e,n){return c.on(e,i(this,n))}function e(t,e){c.off(e)}function n(t,e,n){c.once(e,i(this,n))}function r(t,e,n){var r=this.get(e);t(),c.fire(e,n,r)}function s(t,e){var n=this.get(e);t(),c.fire(e,void 0,n)}function u(t){var e={};this.each(function(t,n){e[n]=t}),t(),a(e,function(t,e){c.fire(e,void 0,t)})}var c=o();return{watch:t,unwatch:e,once:n,set:r,remove:s,clearAll:u}}function o(){return u(f,{_id:0,_subSignals:{},_subCallbacks:{}})}var s=t("../util"),i=s.bind,a=s.each,u=s.create,c=s.slice;e.exports={name:"events",mixin:r};var f={_id:null,_subCallbacks:null,_subSignals:null,on:function(t,e){return this._subCallbacks[t]||(this._subCallbacks[t]={}),this._id+=1,this._subCallbacks[t][this._id]=e,this._subSignals[this._id]=t,this._id},off:function(t){var e=this._subSignals[t];delete this._subCallbacks[e][t],delete this._subSignals[t]},once:function(t,e){var n=this.on(t,i(this,function(){e.apply(this,arguments),this.off(n)}))},fire:function(t){var e=c(arguments,1);a(this._subCallbacks[t],function(t){t.apply(this,e)})}}},{"../util":32}],9:[function(t,e,n){"use strict";function r(t){function e(e,n,r){function o(t,e){s.count+=1,assert(s.values[s.count]==t),assert(s.values[s.count-1]==e)}var s={values:[n],count:0,add:function(t){this.values.push(t)},check:function(){assert(s.count+1==s.values.length)},unwatch:function(){t.unwatch(i)}},i=r?t.once(e,o):t.watch(e,o);return s}test("events",function(){t.set("foo","bar");var n=e("expectNone",void 0);t.watch("foo",function(){});var r=e("foo","bar"),o=e("foo","bar",!0);t.watch("foo",function(){}),r.add("bar2"),o.add("bar2"),t.set("foo","bar2"),r.add(void 0),t.remove("foo"),r.add("bar3"),t.set("foo","bar3");var s=e("foo","bar3");r.add(void 0),s.add(void 0),t.clearAll(),t.clearAll(),r.unwatch(),s.add("bar4"),t.set("foo","bar4"),r.check(),o.check(),s.check(),n.check(),s.unwatch()})}t("./events"),e.exports={setup:r}},{"./events":8}],10:[function(t,e,n){"use strict";function r(t){function e(t,e,n,r){return this.hasNamespace(o)||s.set(e,r),t()}function n(t,e){if(!this.hasNamespace(o)){var n=s.get(e,Number.MAX_VALUE);n<=(new Date).getTime()&&this.remove(e)}return t()}function r(t,e){return this.hasNamespace(o)||s.remove(e),t()}var s=t.namespace(o);return{set:e,get:n,remove:r}}e.exports={name:"expire",mixin:r};var o="expire_mixin"},{}],11:[function(t,e,n){"use strict";function r(t){test("expire",function(e){function n(t,e){r(e,function(r){return!!r||(t>0?(setTimeout(function(){n(t-1,2*e)},0),!1):assert(!1))})}function r(n,r){var o=(new Date).getTime()+n;t.set("foo","bar",o),r("bar"==t.get("foo"))&&setTimeout(function(){r((new Date).getTime()>o)&&r(void 0==t.get("foo"))&&(t.set("foo","bar"),setTimeout(function(){r("bar"==t.get("foo"))&&e()},5))},n)}n(5,10)})}t("./expire"),e.exports={setup:r}},{"./expire":10}],12:[function(t,e,n){"use strict";function r(){t("./lib/json2")}e.exports={name:"json2",mixin:r}},{"./lib/json2":14}],13:[function(t,e,n){"use strict";function r(t){test("serialization with json2",function(){t.set("foo",{bar:"cat"}),assert("cat"===t.get("foo").bar)})}t("./json2"),e.exports={setup:r}},{"./json2":12}],14:[function(require,module,exports){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};"object"!==("undefined"==typeof JSON?"undefined":_typeof(JSON))&&(JSON={}),function(){function f(t){return t<10?"0"+t:t}function this_value(){return this.valueOf()}function quote(t){return rx_escapable.lastIndex=0,rx_escapable.test(t)?'"'+t.replace(rx_escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,s,i,a=gap,u=e[t];switch(u&&"object"===("undefined"==typeof u?"undefined":_typeof(u))&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),"undefined"==typeof u?"undefined":_typeof(u)){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,i=[],"[object Array]"===Object.prototype.toString.apply(u)){for(s=u.length,n=0;n<s;n+=1)i[n]=str(n,u)||"null";return o=0===i.length?"[]":gap?"[\n"+gap+i.join(",\n"+gap)+"\n"+a+"]":"["+i.join(",")+"]",gap=a,o}if(rep&&"object"===("undefined"==typeof rep?"undefined":_typeof(rep)))for(s=rep.length,n=0;n<s;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&i.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&i.push(quote(r)+(gap?": ":":")+o));return o=0===i.length?"{}":gap?"{\n"+gap+i.join(",\n"+gap)+"\n"+a+"}":"{"+i.join(",")+"}",gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!==("undefined"==typeof e?"undefined":_typeof(e))||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"===("undefined"==typeof o?"undefined":_typeof(o)))for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()},{}],15:[function(t,e,n){"use strict";function r(){function t(t,e,n){var r=this.watch(e,n);return n(this.get(e)),r}function e(t,e){this.unwatch(e)}return{observe:t,unobserve:e}}var o=t("./events");e.exports={name:"observe",dependencies:[o],mixin:r}},{"./events":8}],16:[function(t,e,n){"use strict";function r(t){test("observe",function(){t.clearAll();var e=-1,n=[void 0],r=t.observe("foo",function(t,r){e+=1,assert(n[e]==t),assert(n[e-1]==r)});t.unobserve(r),n.push("bar"),t.set("foo","bar"),t.observe("foo",function(t,r){e+=1,assert(n[e]==t),assert(n[e-1]==r)}),n.push("bar2"),t.set("foo","bar2"),assert(e+1==n.length)})}t("./observe"),e.exports={setup:r}},{"./observe":15}],17:[function(t,e,n){"use strict";function r(t){function e(t,e,n,r,o,s){return c("push",arguments)}function n(t,e){return c("pop",arguments)}function r(t,e){return c("shift",arguments)}function s(t,e,n,r,o,s){return c("unshift",arguments)}function u(e,n,r,s,u,c){var f=i(arguments,2);return t.update(n,{},function(t){if("object"!=("undefined"==typeof t?"undefined":o(t)))throw new Error('store.assign called for non-object value with key "'+n+'"');return f.unshift(t),a.apply(Object,f)})}function c(e,n){var r,o=n[1],s=i(n,2);return t.update(o,[],function(t){r=Array.prototype[e].apply(t,s)}),r}return{push:e,pop:n,shift:r,unshift:s,assign:u}}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=t("../util"),i=s.slice,a=s.assign,u=t("./update");e.exports={name:"operations",dependencies:[u],mixin:r}},{"../util":32,"./update":19}],18:[function(t,e,n){"use strict";function r(t){function e(e,n,r){var o="test-"+e;t.set(o,n),n=n||[];var i=n[e],a=t[e];s(r,function(e){var r=i.apply(n,e),s=a.apply(t,[o].concat(e));assert(u(r,s));var c=t.get(o);assert(u(n,c))})}test("push",function(){e("push",[],[[],["a"],["b","c"],[null],[[],{}]])}),test("unshift",function(){e("unshift",void 0,[[],["a"],["b","c"],[null],[[],{}]])}),test("pop",function(){var t=["a","b","c",null,[[],{}]],n=i(t,function(){return[]}).concat([]);e("pop",t,n)}),test("shift",function(){var t=["a","b","c",null,[[],{}]],n=i(t,function(){return[]}).concat([]);e("shift",t,n)}),test("assign",function(){t.clearAll();var e={bar:"cat",mat:{hat:"bat",arr:[1,2,3]}};t.assign("foo",e),assert(u(t.get("foo"),e));var n={bar:"cat2",mat:{hat:"bat2"},newProp:"newProp"};t.assign("foo",n),s(n,function(t,n){e[n]=t}),assert(u(t.get("foo"),e))})}var o=t("../util"),s=o.each,i=o.map,a=t("../../tests/util"),u=a.deepEqual;t("./operations"),e.exports={setup:r}},{"../../tests/util":34,"../util":32,"./operations":17}],19:[function(t,e,n){"use strict";function r(){function t(t,e,n,r){3==arguments.length&&(r=n,n=void 0);var o=this.get(e,n),s=r(o);this.set(e,void 0!=s?s:o)}return{update:t}}e.exports={name:"update",mixin:r}},{}],20:[function(t,e,n){"use strict";function r(t){test("update",function(){t.set("foo",{cat:"mat"}),assert("mat"==t.get("foo").cat),t.update("foo",function(t){t.cat="mat2"}),assert("mat2"==t.get("foo").cat)}),test("update return value",function(){t.clearAll(),t.update("foo",function(t){return assert(void 0==t),{cat:"mat4"}}),assert("mat4"==t.get("foo").cat)}),test("update default value",function(){t.clearAll(),t.update("foo2",{},function(t){t.bar="cat"}),assert("cat"==t.get("foo2").bar)}),test("update default value + return",function(){t.clearAll(),t.update("foo2",[],function(t){return{bar2:"cat2"}}),assert("object"==o(t.get("foo2"))),assert(void 0==t.get("foo2").bar),assert("cat2"==t.get("foo2").bar2)})}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports={setup:r}},{}],21:[function(t,e,n){"use strict";function r(){return{has:o,transact:s,clear:i,forEach:a,getAll:u,serialize:c,deserialize:f}}function o(t,e){return void 0!==this.get(e)}function s(t,e,n,r){null==r&&(r=n,n=null),null==n&&(n={});var o=this.get(e,n),s=r(o);this.set(e,void 0===s?o:s)}function i(t){return this.clearAll.apply(this,arguments)}function a(t){return this.each.apply(this,arguments)}function u(t){return this.dump.apply(this,arguments)}function c(t,e){return JSON.stringify(e)}function f(t,e){if("string"==typeof e)try{return JSON.parse(e)}catch(n){return e||void 0}}var l=t("./dump");e.exports={name:"v1-backcompat",dependencies:[l],mixin:r}},{"./dump":6}],22:[function(t,e,n){"use strict";function r(t){test("backwards compatability with v1",function(){assert("boolean"==typeof t.disabled),assert("boolean"==typeof t.enabled),assert("string"==typeof t.version),assert("function"==typeof t.set),assert("function"==typeof t.get),assert("function"==typeof t.has),assert("function"==typeof t.remove),assert("function"==typeof t.clear),assert("function"==typeof t.transact),assert("function"==typeof t.getAll),assert("function"==typeof t.forEach),assert("function"==typeof t.serialize),assert("function"==typeof t.deserialize),t.transact("foosact",function(t){assert("object"==("undefined"==typeof t?"undefined":o(t)),"new key is not an object at beginning of transaction"),t.foo="foo"}),t.transact("foosact",function(t){assert("foo"==t.foo,"first transaction did not register"),t.bar="bar"}),assert("bar"==t.get("foosact").bar,"second transaction did not register")})}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports={setup:r}},{}],23:[function(t,e,n){"use strict";var r=t("../../tests/tests");r.runTests()},{"../../tests/tests":33}],24:[function(t,e,n){"use strict";function r(t,e){var n=o(t),r={_storage:n,_mixins:e,_namespacePrefix:"",_namespaceRegexp:null},i=m(r,y,{version:"2.0.0-rc1",enabled:!!n,disabled:!n});return s(e,i),i}function o(t){return h(t,function(t){try{var e="__storejs__test__";t.write(e,e);var n=t.read(e)===e;return t.remove(e),n}catch(r){return!1}})}function s(t,e){function n(t){if(!r[t.name]){r[t.name]=!0;var o=t.mixin(e);if(v(o,function(t,n){if("function"!=typeof t)throw new Error("Bad mixin value: "+n+". Mixins should only return functions.");i(e,n,t)}),t.dependencies&&!g(t.dependencies))throw new Error('mixin "'+t.name+'" dependencies should either be an array or undefined');v(t.dependencies,function(t){n(t)})}}var r={};v(t,n)}function i(t,e,n){var r=t[e];t[e]=function(){function t(){if(r){var e=r.apply(o,t.args);return delete t.args,e}}var e=Array.prototype.slice.call(arguments,0),o=this,s=[t].concat(e);return t.args=e,n.apply(o,s)}}function a(t,e){var n=t._storage.fixKey||_;return t._namespacePrefix+n(e)}function u(t,e){t._namespaceRegexp&&(e=e.replace(t._namespaceRegexp,""));var n=t._storage.unfixKey||_;return n(e)}function c(t){return JSON.stringify(t)}function f(t,e){if(!t)return e;var n=l(t);return void 0!==n?n:e}function l(t){try{return JSON.parse(t)}catch(e){return t}}var p=t("./util"),d=p.Global,v=p.each,h=p.pluck,m=p.create,g=p.isList;e.exports={createStore:r};var y={get:function(t,e){var n=a(this,t),r=this._storage.read(n);return f(r,e)},set:function(t,e){if(void 0===e)return this.remove(t);var n=a(this,t);return this._storage.write(n,c(e)),e},remove:function(t){var e=a(this,t);this._storage.remove(e)},each:function(t){var e=this;this._storage.each(function(n,r){var o=u(e,r);t(f(n),o)})},clearAll:function(){this._storage.clearAll()},noConflict:function(){d.store=x},hasNamespace:function(t){return this._namespacePrefix=="__storejs_"+t+"_"},namespace:function(t){if(!b.test(t))throw new Error("store.js namespaces can only have alhpanumerics + underscores and dashes");var e="__storejs_"+t+"_";return m(this,{_namespacePrefix:e,_namespaceRegexp:e?new RegExp("^"+e):null})}},b=/^[a-zA-Z0-9_\-]+$/,_=function(t){return t},x=d.store},{"./util":32}],25:[function(t,e,n){"use strict";e.exports={localStorage:t("./localStorage"),"oldFF-glolalStorage":t("./oldFF-glolalStorage"),"oldIE-userDataStorage":t("./oldIE-userDataStorage"),cookieStorage:t("./cookieStorage"),sessionStorage:t("./sessionStorage"),memoryStorage:t("./memoryStorage")}},{"./cookieStorage":26,"./localStorage":27,"./memoryStorage":28,"./oldFF-glolalStorage":29,"./oldIE-userDataStorage":30,"./sessionStorage":31}],26:[function(t,e,n){"use strict";function r(t){if(!t||!u(t))return null;var e="(?:^|.*;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(p.cookie.replace(new RegExp(e),"$1"))}function o(t){for(var e=p.cookie.split(/; ?/g),n=e.length-1;n>=0;n--)if(l(e[n])){var r=e[n].split("="),o=unescape(r[0]),s=unescape(r[1]);t(s,o)}}function s(t,e){t&&(p.cookie=escape(t)+"="+escape(e)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/")}function i(t){t&&u(t)&&(p.cookie=escape(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function a(){o(function(t,e){i(e)})}function u(t){return new RegExp("(?:^|;\\s*)"+escape(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(p.cookie)}var c=t("../util"),f=c.Global,l=c.trim;e.exports={name:"cookieStorage",read:r,write:s,each:o,remove:i,clearAll:a};var p=f.document},{"../util":32}],27:[function(t,e,n){"use strict";function r(t){return f.getItem(t)}function o(t,e){return f.setItem(t,e)}function s(t){for(var e=f.length-1;e>=0;e--){var n=f.key(e);t(r(n),n)}}function i(t){return f.removeItem(t)}function a(){return f.clear()}var u=t("../util"),c=u.Global;e.exports={name:"localStorage",read:r,write:o,each:s,remove:i,clearAll:a};var f=c.localStorage},{"../util":32}],28:[function(t,e,n){"use strict";function r(t){return u[t]}function o(t,e){u[t]=e}function s(t){for(var e in u)u.hasOwnProperty(e)&&t(u[e],e)}function i(t){delete u[t]}function a(t){u={}}e.exports={name:"memoryStorage",read:r,write:o,each:s,remove:i,clearAll:a};var u={}},{}],29:[function(t,e,n){"use strict";function r(t){return f[t]}function o(t,e){f[t]=e}function s(t){for(var e=f.length-1;e>=0;e--){var n=f.key(e);t(f[n],n)}}function i(t){return f.removeItem(t)}function a(){s(function(t,e){delete f[t]})}var u=t("../util"),c=u.Global;e.exports={name:"globalStorage-oldFF",read:r,write:o,each:s,remove:i,clearAll:a};var f=c.globalStorage},{"../util":32}],30:[function(t,e,n){"use strict";function r(t,e){h||v(function(n){n.setAttribute(t,e),n.save(p)})}function o(t){if(!h){var e=null;return v(function(n){e=n.getAttribute(t)}),e}}function s(t){v(function(e){for(var n=e.XMLDocument.documentElement.attributes,r=n.length-1;r>=0;r--){var o=n[r];t(e.getAttribute(o.name),o.name)}})}function i(t){v(function(e){e.removeAttribute(t),e.save(p)})}function a(){v(function(t){var e=t.XMLDocument.documentElement.attributes;t.load(p);for(var n=e.length-1;n>=0;n--)t.removeAttribute(e[n].name);t.save(p)})}function u(){var t=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");return function(e){return e.replace(/^d/,"___$&").replace(t,"___")}}function c(){if(!d||!d.documentElement||!d.documentElement.addBehavior)return null;var t,e,n,r="script";try{e=new ActiveXObject("htmlfile"),e.open(),e.write("<"+r+">document.w=window</"+r+'><iframe src="/favicon.ico"></iframe>'),e.close(),t=e.w.frames[0].document,n=t.createElement("div")}catch(o){n=d.createElement("div"),t=d.body}return function(e){var r=[].slice.call(arguments,0);r.unshift(n),t.appendChild(n),n.addBehavior("#default#userData"),n.load(p),e.apply(this,r),t.removeChild(n)}}var f=t("../util"),l=f.Global;e.exports={name:"oldIE-userDataStorage",fixKey:u(),write:r,read:o,each:s,remove:i,clearAll:a};var p="oldIE",d=l.document,v=c(),h=(l.navigator?l.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./)},{"../util":32}],31:[function(t,e,n){"use strict";function r(t){return f.getItem(t)}function o(t,e){return f.setItem(t,e)}function s(t){for(var e=f.length-1;e>=0;e--){var n=f.key(e);t(r(n),n)}}function i(t){return f.removeItem(t)}function a(){return f.clear()}var u=t("../util"),c=u.Global;e.exports={name:"sessionStorage",read:r,write:o,each:s,remove:i,clearAll:a};var f=c.sessionStorage},{"../util":32}],32:[function(t,e,n){(function(t){"use strict";function n(){return Object.assign?Object.assign:function(t,e,n,r){for(var o=1;o<arguments.length;o++)a(Object(arguments[o]),function(e,n){t[n]=e});return t}}function r(){if(Object.create)return function(t,e,n,r){var o=i(arguments,1);return l.apply(this,[Object.create(t)].concat(o))};var t=function(){};return function(e,n,r,o){var s=i(arguments,1);return t.prototype=e,l.apply(this,[new t].concat(s))}}function o(){return String.prototype.trim?function(t){return String.prototype.trim.call(t)}:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}function s(t,e){return function(){return e.apply(t,Array.prototype.slice.call(arguments,0))}}function i(t,e){return Array.prototype.slice.call(t,e||0)}function a(t,e){c(t,function(t,n){e(t,n)})}function u(t,e){var n=f(t)?[]:{};return c(t,function(t,r){n[r]=e(t,r)}),n}function c(t,e){if(f(t)){for(var n=0;n<t.length;n++)if(1==e(t[n],n))return t[n]}else for(var r in t)if(t.hasOwnProperty(r)&&1==e(t[r],r))return t[r]}function f(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length}var l=n(),p=r(),d=o(),v="undefined"!=typeof window?window:t;e.exports={assign:l,create:p,trim:d,bind:s,slice:i,each:a,map:u,pluck:c,isList:f,Global:v}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(t,e,n){"use strict";function r(){l(p,function(t){test.group(t.name,function(){o(t)||test.skip("disabled"),test("Storage tests",function(){var e=c([t],[]);s(e)}),l(v,function(e,n){var r=d[n];test.group("addon: "+n,function(){var n=c([t],[r]);e.setup(n)})})})}),a.runTests({failFast:!1})}function o(t){if(!t)return print("Skip unsupported storage:",t.name),!1;var e=c([t],[]);return!e.disabled||(assert(!e.enabled),print("Skip disabled storage:",t.name),!1)}function s(t){assert(t.enabled&&!t.disabled,"store should be enabled"),t.clearAll(),t.get("unsetValue"),t.set("foo","bar"),assert("bar"==t.get("foo"),"stored key 'foo' not equal to stored value 'bar'"),t.remove("foo"),assert(void 0===t.get("foo"),"removed key 'foo' not undefined"),assert(void 0===t.get("foo"),"key 'foo' exists when it shouldn't"),assert("value"==t.set("foo","value"),"store#set returns the stored value"),assert(void 0!==t.get("foo"),"key 'foo' doesn't exist when it should"),t.set("foo","bar1"),t.set("foo","bar2"),assert("bar2"==t.get("foo"),"key 'foo' is not equal to second value set 'bar2'"),t.set("foo","bar"),t.set("bar","foo"),t.remove("foo"),assert(void 0===t.get("foo"),"key 'foo' exists when it shouldn't"),assert("foo"==t.get("bar"),"removing key 'foo' also removed key 'bar'"),t.set("foo","bar"),t.set("bar","foo"),t.clearAll(),assert(void 0===t.get("foo")&&void 0===t.get("bar"),"keys foo and bar not cleared after store cleared"),assert(123==t.get("defaultVal",123),"store.get should return default value"),t.set("foo",{name:"marcus",arr:[1,2,3]}),assert("object"==i(t.get("foo")),"type of stored object 'foo' is not 'object'"),assert(t.get("foo")instanceof Object,"stored object 'foo' is not an instance of Object"),assert("marcus"==t.get("foo").name,"property 'name' of stored object 'foo' is not 'marcus'"),assert(t.get("foo").arr instanceof Array,"Array property 'arr' of stored object 'foo' is not an instance of Array"),assert(3==t.get("foo").arr.length,"The length of Array property 'arr' stored on object 'foo' is not 3"),assert(t.enabled=!t.disabled,"Store.enabled is not the reverse of .disabled"),t.remove("circularReference");var e={},n={one:e};e.two=n;var r=!1;try{t.set("circularReference",e)}catch(o){r=!0}assert(r,"storing object with circular reference did not throw"),assert(!t.get("circularReference"),"attempting to store object with circular reference which should have faile affected store state");var s={"int":42,bool:!0,"float":3.141592653,string:"Don't Panic",odd_string:"{ZYX'} abc:;::)))"};for(var a in s)t._storage.write(a,s[a]),assert(t.get(a)==s[a],a+" was not correctly promoted to valid JSON"),t.remove(a);t.clearAll();var u=0;t.each(function(){u+=1}),assert(0===u)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=t("tinytest");a.hijackConsoleLog();var u=t("../src/engine"),c=u.createStore,f=t("../src/util"),l=f.each,p=t("../src/storage/all"),d=t("../src/addon/all"),v=t("../src/addon/all_tests");e.exports={output:null,outputError:null,runTests:r,failed:!1}},{"../src/addon/all":2,"../src/addon/all_tests":3,"../src/engine":24,"../src/storage/all":25,"../src/util":32,tinytest:36}],34:[function(t,e,n){"use strict";function r(t,e){if(("undefined"==typeof t?"undefined":o(t))!=("undefined"==typeof e?"undefined":o(e)))return!1;if("object"!=("undefined"==typeof t?"undefined":o(t)))return t===e;var n;for(n in t)if(!r(t[n],e[n]))return!1;for(n in e)if(!r(e[n],t[n]))return!1;return!0}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports={deepEqual:r}},{}],35:[function(t,e,n){(function(t){function n(t){return function(e){var n=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");return'<span style="color:'+t+'">'+n+"</span>"}}function r(t){var e=o[t];return function(t){return e[0]+t+e[1]}}var o=e.exports={grey:["[90m","[39m"],green:["[32m","[39m"],yellow:["[33m","[39m"],red:["[31m","[39m"]},s="undefined"!=typeof t.window;for(var i in o)o.hasOwnProperty(i)&&(o[i]=s?n(i):r(i))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],36:[function(t,e,n){(function(n){function r(t){o(g,t),w.t0=new Date,w._runNextTest()}function o(t,e,n,r){t||(t={});for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var i in s)s.hasOwnProperty(i)&&(t[i]=s[i])}return t}function s(){return w.skipGroupStack[w.skipGroupStack.length-1]}function i(t,e){s()?w.tests.push({name:w.currentGroup+" - "+t,shouldSkip:!0}):w.tests.push({name:w.currentGroup+" - "+t,fn:e})}function a(t,e,n,r){if(!t){var o=Array.prototype.slice.call(arguments,1).join(" "),s="assert failed"+(o?": "+o:"");throw u(v.red(s)),new Error(s)}}function u(){if(_){g.outputEl||(g.outputEl=document.createElement("div"),o(g.outputEl.style,{fontFamily:"monaco,sans-serif",fontSize:"12px",padding:"10px",background:"black",color:"white"}),document.body.appendChild(g.outputEl));for(var t=Array.prototype.slice.call(arguments,0),e=0;e<t.length;e++)void 0===t[e]&&(t[e]="undefined"),"string"!=typeof t[e]&&(t[e]=JSON.stringify(t[e])),t[e]=t[e].replace(/\n/g,"<br/>");g.outputEl.appendChild(document.createElement("div")).innerHTML=t.join(" "),w.hasFailedTest||(document.documentElement.scrollTop=document.body.scrollTop=99999999)}else f.apply(this,arguments)}function c(){console.log=function(){var t=Array.prototype.slice.call(arguments);t.unshift(v.grey("console.log():")),u.apply(this,t)}}function f(){f.consoleLog.apply(console,arguments)}function l(){for(var t in m)"_old"!=t&&m.hasOwnProperty(t)&&(this[t]=m._old[t])}function p(t){d(),g.onDone?g.onDone(t):h.process&&h.process.exit&&n.exit(t)}function d(){for(var t=w.tests.length,e=w.failedTests.length,n=t-e,r=[],o=0;o<w.tests.length;o++){var s=w.tests[o];s.skipped||s.result||r.push({name:s.name||"",result:!!s.result,message:s.message||"",duration:s.duration||0})}h.global_test_results={total:t,failed:e,passed:n,duration:w.duration,tests:r}}var v=t("./color");e.exports={runTests:r,test:i,assert:a,print:u,noConflict:l,hijackConsoleLog:c};i.group=function(t,e){var n=w.currentGroup;w.currentGroup=(w.currentGroup?w.currentGroup+" - ":"")+t,w.skipGroupStack.push(s()),e(),w.skipGroupStack.pop(),w.currentGroup=n},i.skip=function(t){if(w.current)w.skipCurrentTest=!0;else{if(!w.currentGroup)throw new Error('test.skip() called outside of test and group. ("'+t+'")');w.skipGroupStack[w.skipGroupStack.length-1]=!0}};var h=function(){return this}();h.console||(console={},c()),f.consoleLog=console.log;var m={_old:{},assert:a,test:i,print:u},g={failFast:!1,outputEl:null,maxDuration:750};for(var y in m)"_old"!=y&&m.hasOwnProperty(y)&&(m._old[y]=h[y],h[y]=m[y]);var b=function(t){setTimeout(t,0)},_="undefined"!=typeof h.window;if(_){window.addEventListener&&window.addEventListener("error",function(t){w._onTestDone(t.error?t.error:t)},!1);var x=window.onerror||function(){};window.onError=function(t,e,n){return w._onTestDone(new Error(t+" ("+e+":"+n+")")),x.apply(this,arguments)}}else n.on("uncaughtException",function(t){w._onTestDone(t.error?t.error:t)});var w={currentGroup:"",skipGroupStack:[],
tests:[],failedTests:[],skippedTests:[],current:null,testIndex:-1,t0:null,_runNextTest:function(){return w.testIndex+=1,w.testIndex==w.tests.length?void w._finish():(w.current=w.tests[w.testIndex],w.current.shouldSkip?(w.current.skipped=!0,u(v.grey("Skip: "+w.current.name)),void w._runNextTest()):(u(v.grey("Run: "+w.current.name)),w.current.t0=new Date,w.failTimeout=setTimeout(function(){w._onTestDone("Test timed out")},g.maxDuration),void w._runTest(w.current.fn)))},_runTest:function(t){try{if(1==w.current.fn.length)w.current.fn(function(t){w._onTestDone(t)});else{var e=w.current.fn();e?e.then(w._onTestDone,w._onTestDone):w._onTestDone()}}catch(n){w._onTestDone(n)}},_onTestDone:function(t){if(!w.current)return u(v.red("Error during tests setup:"),"\n",t.stack?t.stack:t.toString()),void p(1);clearTimeout(w.failTimeout);var e=new Date-w.current.t0;if(w.skipCurrentTest)w.current.skipped=!0;else if(t){a(!w.current.result);var n=t.stack?t.stack:t.toString();if(w.current.result=!1,w.current.message=n,w.current.duration=e,u(v.red("Fail "+e+"ms"),"\n",n),w.hasFailedTest=!0,g.failFast)return void w._finish()}else{w.current.result=!0,w.current.duration=e;var r=e<50?v.green:e<350?v.yellow:v.red;u(v.green("Pass"),r(e+"ms"))}w.skipCurrentTest=!1,b(w._runNextTest)},_finish:function(){w.duration=(new Date).getTime()-w.t0;for(var t=w.tests.length-w.testIndex,e=0;e<w.tests.length;e++){var n=w.tests[e];n.skipped?w.skippedTests.push(n):n.result||w.failedTests.push(n)}t&&u(v.yellow("Exited without running "+t+" tests")),w.failedTests.length&&u(v.red(w.failedTests.length+" tests failed")),w.skippedTests.length&&u(v.yellow(w.skippedTests.length+" tests skipped")),w.failedTests.length?p(1):0==w.tests.length?(u(v.yellow("No tests")),p(1)):(u(v.green("All done!"),w.tests.length,"tests passed."),p(0))}}}).call(this,t("_process"))},{"./color":35,_process:1}]},{},[23])(23)});